<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>title</title>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
</head>
<body>

<h1>Meld deg på nyhetsbrev!</h1>    


<input type="text" id="name" placeholder="Navn" /> <br/>
<input type="text" id="email" placeholder="Epost" /> <br/>
<input type="button" value="Meld på" onclick="subscribe()" /> <br/>

<tt style="color:blue" id="wentok"></tt>

<script>


    async function subscribe() {

        var nameInput = document.getElementById("name").value.toString();
        var emailInput = document.getElementById("email").value.toString();


        let result = await axios.post('/api/newsletter', { name: nameInput, email: emailInput });

        if (result.status === 200 || result.status === 201 || result.status === 202 || result.status === 204) {
                document.getElementById("wentok").innerHTML = "Registrert! Sjekk epost for å verifisere";
            } else {
                document.getElementById("wentok").innerHTML = "nooo";
        }

        console.log(result);

        }


        //test();

        //async function test() {
        //    var subscribe = {
        //        name: "even",
        //        email: "even@notverified.no"
        //    }

        //    var result = await axios.post('api/newsletter', subscribe);

        //    console.log(result);
        //}


    </script>

</body>
</html>
